---
title: 'GVPT392(849):  Introduction to GIS for Social Science Research'
author: "Nicholas Thompson"
date: "9am Oct3 - 5pm Oct 7, 2016"
output:
  html_document: default
  pdf_document:
    fig_caption: yes
    fig_height: 9.02
    fig_width: 7
    keep_tex: yes
    latex_engine: xelatex
subtitle: Mid-Term Exam
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

The following coverages can be found in the PACD8 folder.

1.  PA_CD8_Voterfile $=$ all registered voters for Pennsylvania, Congressional District 8.  This is north-suburban Philadelphia, including all of Bucks and part of Montgomery Counties.

2.  PA_CD8_Boundary $=$ the outline for CD 8.

3.  PA_and_NJ_Counties $=$ County boundaries for the two states.

4.  Four States = State boundaries for PA, DE, NJ, and MD.

5.  CD8_PA_Pct_Data_2012 $=$ voter precinct data for 2012.

6.  Mont_County_Recent_Movers_10_12.

7.  Bucks_County_Recent_Movers_10_12.

8.  CD8_Places.

9.  PA CD8_Tracts.

Three files above contain points for voters at their residences.  These are 1, 6, and 7.  For these files, the following columns contain important information:

Age (and Year Born) $=$ the age of the voter in 2012.

Rep_Party, Dem_Party, Ind_Unaf_Party $=$ the party registration of the voter:  Rep $=$ Republican, Dem $=$ Democratic, and Ind_Unaf $=$ Independent/Unaffiliated.

And there are other items that will be less important for this exercise.

-----

For the following questions, use whatever tools you deem appropriate form the ArcGIS package, but be sure to describe what you did to address the questions.  Be resourceful, but you need not write more than one page in response to each question.

1.  Aggregate the voter and mover data to the census tract level for PA CD8.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:navy">To aggregate the data, I used a three phase process with multiple steps in each phase.  In Phase 1, I imported the data using the catalogue in ArcMap.  To import the data I first created a geodatabase file named `exam`.  Here I imported all exam shapefiled included in the provided exam folder by right clicking on the `exam.gdb` and selecting import from multiple.  Next I systemtaically added four file layers to the ArcMap table of contents:  </span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:navy">a.  PA_CD8_Voterfile (hereafter depicted as `voter`); </span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:navy">b.  Mont_County_Recent_Movers_10_12 (hereafter depicted as `MC`); </span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:navy">c.  Buck_County_Recent_Movers_10_12 (hereafter depicted as `BC`); </span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:navy">d.  PA_CD8_Tracts (hereafter depicted as `tracts`).  </span>

<span style="color:navy">This was the end of Phase 1. </span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:navy">In Phase 2, I reviewed the data and deleted unnecessary fields.  The number is too great to depict which were removed.  I kept essential fields outlined in the instructions above, as well as some others that I anticipated would be necessary (including `MOVER` from the `voter` file, `ozipcode` and `dzipcode` from `MC` and `BC`, and `ORNIC`, `DRNIC`, and `RNIC` from `voter`, `BC`, and `MC`).  The combination of fields chosen allowed me to manipulate the data to achieve the desired results.  I removed fields by double-clicking on each layer in the table of contents and navigating to the `Fields` tab.  After clearing all of the fields, I was able to check only the fields I wanted to keep.  Next, I exported the data into new layers within the geodatabase.  This data management process ended Phase 2. </span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:navy">In Phase 3, I used the `Spatial Join` feature (hereafter known as `SJ`) to systemtaically join the layers.  First I conducted a `SJ` of `voters` to `tracts` and created a new layer called `tracts01`.  Next I created the following `SJ`s: </span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:navy">a.  `tracts` $+$ `BC` $=$ `tracts02` </span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:navy">b.  `tracts` $+$ `MC` $=$ `tracts04` </span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:navy">c.  `tracts01` $+$ `tracts02` $=$ `tracts03` </span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:navy">d.  `tracts03` $+$ `tracts04` $=$ `tracts07` </span>

<span style="color:navy">The last combination created a spatially joined dataset depicting the north-suburban part of Philadelphia.</span>

+ Then compute and calculate the Democratic $\%$ of total registered voters (10 points).

<span style="color:navy">To compute and calculate the Democratic $\%$ of total registered voters I needed to create a new field in the `BC` and `MC` shapefiles.  I completed these computations prior to merging all of the data to ensure that they were carried over in each of the `SJ`s.  First, I created a new field called `vote_total`.  Using the field calculator tool, I added the `Republican`, `Democratic`, and `Independent` fields together.  This produced a one in each row of the `vote_total`.  Next, I used the statistics tool to calculate the total sum of from the `Democratic` field and the the sum from the `vote_total` fields.  I conducted statistical analysis before and after conducting the joins.  The Table 1 below shows the outcomes.  Note there is no significant difference in the percentages either pre- or post-join.</span>



\begin{table}[]
\centering
\caption{Percentage of Democratic Voters}
\begin{tabular}{lll}
Field       & Pre-Join & Post-Join \\
\hline
Democratic  & 71,048   & 133,467   \\
vote\_total & 540,451  & 1,019,887 \\
\hline
\hline
Percentages & 53.23 \% & 52.99 \% 
\end{tabular}
\end{table}

+  Compute and calculate the Democratic $\%$ of total movers in Bucks and Montgomery counties (10 points).

<span style="color:navy">To calculate the percentage of democratic movers I created two fields in `BC` and `MC` once callde `zip_dif` and another called `move2`.  The `zip_dif` field captured a difference between the originating zip code (`ozipcode`) of each voter in the respective counties and the destination zip code (`dzipcode`).  Next, a phython code converted the `zip_dif` field into a $1$ or a $0$.  This allowed me to total the number of people that moved from one zip code to another.  Table 2 shows the results of this computation.  

```{r python code, eval=FALSE}
def is_positive(x):
  if (abs(x)>0):
	return 1
  elif (abs(x)==0):
	return 0 
```

\begin{table}[]
\centering
\caption{Percentage of Democratic Movers}
\label{my-label}
\begin{tabular}{llll}
Field       & Montgomery & Bucks    & Sum      \\
\hline
Democratic  & 2,016      & 22,555   & 24,571   \\
move\_total & 4,620      & 42,040   & 46,660   \\
Percentages & 43.63 \%   & 53.65 \% & 52.66 \%
\end{tabular}
\end{table}

+  Produce two maps of these percentages.

To produce my maps I followed some formatting guidelines.  First, I always included a legend, scale, and north seeking arrow.  Also included was my name as the author and the date I finalized the map.  For this first set of maps I normalized the `Sum_Sum_Democratic` variable over the `Sum_Sum_vote_total` for the first map (as labeled in Figure 1).  I normalized the `Sum_Sum_Democratic` variable over the `Sum_Sum_vote_total` variable for the second requirement.  

This depicts a strong concentration of Democratic voters located in the southeastern portion of the country.  Democratic voters show a propensity for migration with a large percentage moving in and around the southeastern portion of the county.  

Note that this data does not reflect the `MOVER` field from the `MC` dataset.  The `MOVER` variable was not used because it was only available in the `MC` dataset and only depicted a small swath of migration running from northwest to southeast along the southwestern third of the county. 

![Figure 1:  Democratic Voters and Movers](question_1-2.png)

2.  How would you characterize the spatial distribution of Republicans, Democrats, and Independents in PA CD8?  Write up two paragraphs based on what you have found, describing how you used ArcGIS to address the question.  (20 points)

Democrats, by and large, tend to be located in the south eastern part of the map (which is northern Philadelphia).  Republicans are a significantly lesser amount of the population and tend to inhabit the norther part of the voting district, with a concentration in the center of Montgomery county in the southwest.  Independents show similar patterns to the Republicans but on a much smaller scale.

I used a percentage of total voters for each party and compared them to one another, as depicted in Figure 2.  This distribution by percentage was calculated using the `Sum_Sum_Democrat`, `Sum_Sum_Republican` and `Sum_Sum_Independent` variables normalized by `Sum_Sum_vote_total` variable.  I utilized a five quantile break.

![Figure 2:  Parties in Space](question_2.png)

3.  The data included also show two populations of recent movers from inside PA and from nearby states.  How do the recent movers in Montogomery and Bucks counties compare by age and by party registration to the entire PA_CD8 voting populations?  Explain your answer in no more than one page.


